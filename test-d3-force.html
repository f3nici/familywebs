<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3-Force Test</title>
    <!-- D3-force for auto-organize layout -->
    <script src="https://cdn.jsdelivr.net/npm/d3-force@3.0.0/dist/d3-force.min.js"></script>
</head>
<body>
    <h1>D3-Force Library Test</h1>
    <div id="output"></div>

    <script>
        const output = document.getElementById('output');
        const results = [];

        // Check if d3 is loaded
        results.push('<h2>D3 Library Check:</h2>');
        results.push(`<p>typeof d3: <code>${typeof d3}</code></p>`);

        if (typeof d3 !== 'undefined') {
            results.push('<p style="color: green;">✅ d3 object is available!</p>');
            results.push('<h3>Available d3 functions:</h3>');
            results.push('<ul>');
            Object.keys(d3).forEach(key => {
                results.push(`<li><code>d3.${key}</code> (${typeof d3[key]})</li>`);
            });
            results.push('</ul>');

            // Try to create a simple simulation
            results.push('<h2>Simulation Test:</h2>');
            try {
                const nodes = [
                    { id: 'a', x: 0, y: 0 },
                    { id: 'b', x: 100, y: 100 }
                ];
                const links = [
                    { source: 'a', target: 'b' }
                ];

                const simulation = d3.forceSimulation(nodes)
                    .force('link', d3.forceLink(links).id(d => d.id).distance(50))
                    .force('charge', d3.forceManyBody().strength(-100))
                    .force('center', d3.forceCenter(200, 200));

                simulation.tick();

                results.push('<p style="color: green;">✅ Simulation created successfully!</p>');
                results.push(`<p>Node 'a' position: x=${nodes[0].x.toFixed(2)}, y=${nodes[0].y.toFixed(2)}</p>`);
                results.push(`<p>Node 'b' position: x=${nodes[1].x.toFixed(2)}, y=${nodes[1].y.toFixed(2)}</p>`);
            } catch (error) {
                results.push(`<p style="color: red;">❌ Error creating simulation: ${error.message}</p>`);
                results.push(`<pre>${error.stack}</pre>`);
            }
        } else {
            results.push('<p style="color: red;">❌ d3 object is NOT available!</p>');
        }

        output.innerHTML = results.join('\n');
    </script>
</body>
</html>
