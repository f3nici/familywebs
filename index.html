<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Roots - Interactive Family Tree</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Nunito+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- React Flow for fluid relationship lines -->
    <script src="https://cdn.jsdelivr.net/npm/reactflow@11.10.1/dist/umd/index.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reactflow@11.10.1/dist/style.css">

    <!-- D3.js (includes d3-force) for Web Mode layout -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="react-flow-styles.css">
</head>
<body>
    <div id="root" class="app-placeholder">
        <p class="placeholder-title">Loading Family Rootsâ€¦</p>
        <p class="placeholder-subtitle">
            If you continue to see a blank screen, make sure JavaScript is enabled and that
            the <code>app.js</code> and <code>styles.css</code> files are available in the same folder as this HTML file.
        </p>
    </div>

    <noscript>
        <div class="load-error">
            <p>This page requires JavaScript to run the Family Roots app.</p>
            <p>Please enable JavaScript and reload the page.</p>
        </div>
    </noscript>

    <script>
        (() => {
            const root = document.getElementById('root');

            const showLoadError = () => {
                if (!root) return;
                root.innerHTML = `
                    <div class="load-error">
                        <p>We couldn't load the Family Roots app.</p>
                        <p>Confirm that <strong>app.js</strong> and <strong>styles.css</strong> are being served correctly.</p>
                    </div>
                `;
                root.classList.add('app-placeholder');
            };

            window.__FAMILY_TREE_APP_READY__ = () => {
                root?.classList.remove('app-placeholder');
            };

            window.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => {
                    if (!window.__FAMILY_TREE_APP_LOADED__) {
                        showLoadError();
                    }
                }, 2000);
            });
        })();
    </script>

    <!-- Fluid Tree React Flow Component -->
    <script
        type="text/babel"
        data-presets="env,react"
        data-plugins="proposal-class-properties,proposal-object-rest-spread"
        src="FluidTreeWithReactFlow.js"
    ></script>

    <!-- Main App -->
    <script
        type="text/babel"
        data-presets="env,react"
        data-plugins="proposal-class-properties,proposal-object-rest-spread"
        src="app.js"
    ></script>
</body>
</html>
